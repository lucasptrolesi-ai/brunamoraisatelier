<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bruna Morais Peixoto Ateli√™</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&display=swap" rel="stylesheet" />

  <style>
    body{margin:0;font-family:'Cormorant Garamond',serif;background:#fdf9f3;color:#3b2f2f;scroll-behavior:smooth}
    /* anima√ß√µes */
    @keyframes fadeInUp{0%{opacity:0;transform:translateY(40px)}100%{opacity:1;transform:translateY(0)}}
    @keyframes fadeIn{0%{opacity:0}100%{opacity:1}}

    /* banner */
    .banner{position:relative;width:100%;height:100vh;overflow:hidden}
    .banner-img{width:100%;height:100%;object-fit:cover;filter:brightness(85%)}
    .banner-texto{position:absolute;bottom:90px;left:50%;transform:translateX(-50%);background:rgba(255,255,255,.3);backdrop-filter:blur(6px);padding:25px 40px;border-radius:15px;text-align:center;color:#3b2f2f;box-shadow:0 2px 10px rgba(0,0,0,.2);animation:fadeInUp 1.6s ease-out}
    .banner-texto h1{font-size:2.8rem;margin:0 0 10px;color:#d4af37;text-shadow:0 1px 4px rgba(0,0,0,.3)}
    .banner-texto p{font-size:1.3rem;margin:0}
    .btn-catalogo{margin-top:25px;display:inline-block;background:#d4af37;color:#fff;padding:12px 25px;border-radius:30px;text-decoration:none;font-size:1.1rem;transition:.3s}
    .btn-catalogo:hover{background:#b8962b;transform:scale(1.05)}

    /* cat√°logo */
    .catalogo{padding:80px 10%;text-align:center}
    .catalogo h2{font-size:2.2rem;color:#8b6f47;margin-bottom:50px}
    .produtos{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:30px}
    .produto{background:#fff;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,.08);overflow:hidden;transition:.3s}
    .produto:hover{transform:translateY(-8px);box-shadow:0 8px 20px rgba(0,0,0,.1)}
    .produto img{width:100%;height:250px;object-fit:cover;display:block}
    .produto h3{margin:15px 0 5px;font-size:1.3rem;color:#4a3c2a}
    .produto p{color:#7c6b55;font-size:1rem;margin:0 15px 10px}
    .preco{font-weight:700;color:#b08d29;margin:0 0 15px}

    /* whatsapp fixo */
    .whatsapp-container{position:fixed;bottom:25px;right:25px;z-index:999;text-align:center}
    .whatsapp-msg{background:#fdf5da;color:#7a5d15;padding:6px 12px;border-radius:10px;font-size:.95rem;font-weight:600;margin-bottom:8px;box-shadow:0 2px 10px rgba(0,0,0,.1)}
    .whatsapp-btn{background:#d4af37;color:#fff;border-radius:50%;width:60px;height:60px;display:flex;align-items:center;justify-content:center;font-size:28px;box-shadow:0 4px 15px rgba(0,0,0,.3);text-decoration:none;transition:.3s}
    .whatsapp-btn:hover{background:#b8962b;transform:scale(1.1)}

    /* rodap√© */
    footer{text-align:center;padding:30px 10px;background:#f8f5ef;color:#7a6a56;font-size:1rem}
    footer a{color:#b08d29;text-decoration:none;font-weight:600}

    /* responsivo */
    @media (max-width:640px){
      .banner-texto{left:50%;right:auto;width:88%}
      .banner-texto h1{font-size:2rem}
      .banner-texto p{font-size:1.05rem}
    }
  </style>
</head>

<body>
  <!-- BANNER -->
  <section class="banner">
    <img class="banner-img" src="https://raw.githubusercontent.com/lucasptrolesi-ai/brunamoraisatelier/main/imagens/banner.jpg" alt="Banner Bruna Morais Ateli√™">
    <div class="banner-texto">
      <h1>Bruna Morais Peixoto Ateli√™</h1>
      <p>Joias com eleg√¢ncia e sofistica√ß√£o</p>
      <a href="#catalogo" class="btn-catalogo">Ver Cat√°logo ‚Üì</a>
    </div>
  </section>

  <!-- CAT√ÅLOGO -->
  <section class="catalogo" id="catalogo">
    <h2>Cat√°logo de Joias</h2>
    <div class="produtos" id="lista-produtos">
      <p>Carregando produtos...</p>
    </div>
  </section>

  <!-- WHATSAPP -->
  <div class="whatsapp-container">
    <div class="whatsapp-msg">üíõ Fale comigo</div>
    <a class="whatsapp-btn" target="_blank" title="Fale conosco pelo WhatsApp"
       href="https://wa.me/5535984595425?text=Ol%C3%A1%20Bruna!%20Gostaria%20de%20saber%20mais%20sobre%20as%20joias%20do%20seu%20ateli%C3%AA.">üí¨</a>
  </div>

  <!-- RODAP√â -->
  <footer>
    ¬© 2025 Bruna Morais Peixoto Ateli√™ ‚Ä¢ Desenvolvido por
    <a href="https://github.com/lucasptrolesi-ai" target="_blank" rel="noopener">Lucas Peixoto</a>
  </footer>

  <!-- PapaParse para CSV robusto -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

  <!-- Script de cat√°logo -->
  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      // üîó sua planilha publicada em CSV
      const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQO0ciGyUyPSAuWnR5L39zInL8lqS2BLZPVquCNqWnYZYUF2wSzm6X6CQ7hf4zPKQ/pub?gid=1833522644&single=true&output=csv";
      const container = document.getElementById("lista-produtos");
      const RAW_PREFIX = "https://raw.githubusercontent.com/lucasptrolesi-ai/brunamoraisatelier/main/imagens/";

      const placehold = "https://via.placeholder.com/800x600.png?text=Imagem+indispon%C3%ADvel";

      const driveToDirect = (url) => {
        if (!url) return "";
        let id = "";
        try {
          if (url.includes("/file/d/")) {
            id = url.split("/file/d/")[1].split("/")[0];
          } else if (url.includes("open?id=")) {
            id = new URL(url).searchParams.get("id");
          } else if (url.includes("uc?id=")) {
            id = new URL(url).searchParams.get("id");
          }
        } catch(e){ /* ignore */ }
        return id ? `https://drive.google.com/uc?export=view&id=${id}` : url;
      };

      const normalizeImg = (value) => {
        if (!value) return placehold;
        let src = value.trim();
        if (src.includes("drive.google.com")) src = driveToDirect(src);
        if (!/^https?:\/\//i.test(src)) src = RAW_PREFIX + src; // arquivo da pasta imagens
        return src;
      };

      const getField = (row, names) => {
        const keys = Object.keys(row);
        for (const n of names) {
          const k = keys.find(k => k.trim().toLowerCase() === n.toLowerCase());
          if (k) return row[k];
        }
        return undefined;
      };

      try {
        const resp = await fetch(CSV_URL, { cache: "no-store" });
        const text = await resp.text();

        const parsed = Papa.parse(text, { header: true, skipEmptyLines: true });
        container.innerHTML = "";

        const rows = parsed.data && parsed.data.length ? parsed.data : [];

        rows.forEach((row) => {
          // tenta por cabe√ßalho; se n√£o houver, cai para ordem padr√£o
          let nome = getField(row, ["Nome","name","produto","pe√ßa"]) ?? row[Object.keys(row)[0]];
          let descricao = getField(row, ["Descri√ß√£o","descricao","descri√ß√£o","description"]) ?? row[Object.keys(row)[1]];
          let preco = getField(row, ["Pre√ßo","preco","pre√ßo","price"]) ?? row[Object.keys(row)[2]];
          let imagem = getField(row, ["Imagem","Link da Imagem","imagem","image","url","foto"]) ?? row[Object.keys(row)[3]];

          if (!nome || !descricao || !preco) return;

          const imgSrc = normalizeImg(imagem || "");

          const card = document.createElement
